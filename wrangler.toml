name = "blt-lettuce"
main = "cloudflare-worker/worker.py"
compatibility_date = "2024-01-01"
compatibility_flags = ["python_workers"]

# KV Namespace for storing stats
# To create this namespace, run:
#   wrangler kv:namespace create "STATS_KV"
# Then replace the placeholder ID below with the actual namespace ID from the output
# we will be using D1

# Bundle welcome_message.txt so that the Python worker can read it with open()
# at runtime.  welcome_message.txt is the single source of truth for the join
# welcome message sent to every new team member via the team_join webhook event.
[[rules]]
type = "Text"
globs = ["welcome_message.txt"]

# ---------------------------------------------------------------------------
# Secrets — set these once via the Wrangler CLI before deploying.
# Never commit real tokens to source control.
#
# Required (the /webhook endpoint will not function without these):
#   wrangler secret put SLACK_TOKEN        # Bot User OAuth Token  (xoxb-…)
#   wrangler secret put SIGNING_SECRET     # Slack App Signing Secret
#
# Optional (enable extra channel features; safe to omit for fresh installs):
#   wrangler secret put JOINS_CHANNEL_ID   # Channel ID for join notifications
#   wrangler secret put CONTRIBUTE_ID      # Channel ID for contribution guides
#   wrangler secret put DEPLOYS_CHANNEL    # Channel name for deploy alerts
# ---------------------------------------------------------------------------

[vars]
ENVIRONMENT = "production"
VERSION = "2.0.0"
